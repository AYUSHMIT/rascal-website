## Document preparation issues

The following issues have been detected while preparing this draft document. It is not ready for publication.

1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Markup/InlineMarkup/ReferenceToConcept/ReferenceToConcept.md|:7,0 Broken concept link:  DisplayName 
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Markup/InlineMarkup/ReferenceToConcept/ReferenceToConcept.md|:8,0 Broken concept link:  ParentConceptName-ConceptName 
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Markup/InlineMarkup/ReferenceToConcept/ReferenceToConcept.md|:9,0 Broken concept link: Course
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Markup/InlineMarkup/ReferenceToConcept/ReferenceToConcept.md|:10,0 Broken concept link: Course:ParentConceptName-ConceptName
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Markup/InlineMarkup/ReferenceToConcept/ReferenceToConcept.md|:37,0 Ambiguous concept link: Tutor:Markup-InlineMarkup resolves to all of {"/Tutor.md#Markup-InlineMarkup","#Markup-InlineMarkup"}
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Markup/InlineMarkup/ReferenceToConcept/ReferenceToConcept.md|:37,0 Ambiguous concept link: Tutor:Markup-InlineMarkup resolves to all of {"/Tutor.md#Markup-InlineMarkup","#Markup-InlineMarkup"}
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Markup/InlineMarkup/ReferenceToConcept/ReferenceToConcept.md|:41,0 Ambiguous concept link: Rascal:Statements-If resolves to all of {"#Statements-If","/Rascal.md#Statements-If"}
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Markup/InlineMarkup/ReferenceToConcept/ReferenceToConcept.md|:41,0 Ambiguous concept link: Rascal:Statements-If resolves to all of {"#Statements-If","/Rascal.md#Statements-If"}
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Markup/InlineMarkup/Callout/Callout.md|:20,0 Broken concept link: Listing
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Markup/QuestionMarkup/QuestionMarkup.md|:30,0 Ambiguous concept link: Value resolves to all of {"#Markup-QuestionMarkup-Value","#Expressions-Values-Value"}
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Markup/QuestionMarkup/QuestionMarkup.md|:39,0 Ambiguous concept link: Value resolves to all of {"#Markup-QuestionMarkup-Value","#Expressions-Values-Value"}
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Markup/StructureMarkup/TableOfContents/TableOfContents.md|:25,0 Broken concept link: TOC
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Concept/Concept.md|:75,0 Ambiguous concept link: Tutor:Concept-Types resolves to all of {"/Tutor.md#Concept-Types","#Concept-Types"}
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Concept/Concept.md|:75,0 Ambiguous concept link: Tutor:Concept-Details resolves to all of {"/Tutor.md#Concept-Details","#Concept-Details"}
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Concept/Concept.md|:75,0 Ambiguous concept link: Tutor:Concept-Function resolves to all of {"#Concept-Function","/Tutor.md#Concept-Function"}
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Concept/Concept.md|:75,0 Ambiguous concept link: Tutor:Concept-Pitfalls resolves to all of {"#Concept-Pitfalls","/Tutor.md#Concept-Pitfalls"}
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Concept/Concept.md|:75,0 Ambiguous concept link: Tutor:Concept-Description resolves to all of {"/Tutor.md#Concept-Description","#Concept-Description"}
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Concept/Concept.md|:75,0 Ambiguous concept link: Tutor:Concept-Examples resolves to all of {"#Concept-Examples","/Tutor.md#Concept-Examples"}
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Concept/Concept.md|:75,0 Ambiguous concept link: Tutor:Concept-Benefits resolves to all of {"#Concept-Benefits","/Tutor.md#Concept-Benefits"}
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Concept/Concept.md|:75,0 Ambiguous concept link: Tutor:Concept-Synopsis resolves to all of {"#Concept-Synopsis","/Tutor.md#Concept-Synopsis"}
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Concept/Concept.md|:75,0 Ambiguous concept link: Tutor:Concept-Name resolves to all of {"#Concept-Name","/Tutor.md#Concept-Name"}
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Concept/Concept.md|:75,0 Ambiguous concept link: Tutor:Concept-Syntax resolves to all of {"#Concept-Syntax","/Tutor.md#Concept-Syntax"}
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Concept/Examples/Examples.md|:20,0 Broken concept link: Screen
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Concept/Synopsis/Synopsis.md|:21,0 Ambiguous concept link: Function resolves to all of {"#Concept-Function","#Declarations-Function"}
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Concept/Synopsis/Synopsis.md|:21,0 Ambiguous concept link: Syntax resolves to all of {"#Languages-Lisra-Syntax","#Syntax-Syntax","#Concept-Syntax","#Languages-Pico-Syntax"}
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Maintenance/Maintenance.md|:20,0 Ambiguous concept link: Tutor:Maintenance-Renaming resolves to all of {"#Maintenance-Renaming","/Tutor.md#Maintenance-Renaming"}
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Maintenance/Maintenance.md|:20,0 Ambiguous concept link: Tutor:Maintenance-Adding resolves to all of {"/Tutor.md#Maintenance-Adding","#Maintenance-Adding"}
1. [warning] |project://rascal/src/org/rascalmpl/courses/Tutor/Maintenance/Maintenance.md|:20,0 Ambiguous concept link: Tutor:Maintenance-Removing resolves to all of {"/Tutor.md#Maintenance-Removing","#Maintenance-Removing"}

## Tutor {#Tutor}

### Synopsis 

The RascalTutor can be used to create, maintain and follow interactive courses.





### Description 
The RascalTutor is an interactive [Authoring](#Authoring-Authoring) and learning environment intended to create and follow interactive courses related to the Rascal language.
It is based on the following principles and ideas:

* The basic notion is a [Concept](#Concept-Concept). Each concept has a _name_ and contains a fixed set of subsections that describe it.
* A course is a _concept tree_:
  The central subject of the course is the root of the concept tree, and all subtrees further explain their parent concept.


A _student_ using a course can:

* Browse through the table of contents of the concept tree of the course.
* Search for concepts and specific terms using a search box.
* Read individual concepts.
* Follow links to other concepts.

An _author_ of a course can:

* Create a new course.
* Create a new concept in a course.
* Edit a concept directly using a standard text editor.
* Add code examples that are actually executed when the concept is turned into an HTML page.
* Recompile the course.
* Inspect the warnings that are generated for the whole course in order to 
  control the quality of the concept descriptions.

The actual markup used is an extension of _AsciiDoc_, see http://asciidoctor.org and
in most cases we directly refer to 

* http://asciidoctor.org/docs/asciidoc-syntax-quick-reference/
* http://asciidoctor.org/docs/user-manual/

The folling topics will be described here:
* [Tutor:Architecture](/Tutor.md#Architecture-Architecture)
* [Tutor:Markup](/Tutor.md#Markup-Markup)
* [Tutor:Authoring](/Tutor.md#Authoring-Authoring)
* [Tutor:Concept](/Tutor.md#Concept-Concept)
* [Tutor:Maintenance](/Tutor.md#Maintenance-Maintenance)





## Architecture {#Architecture-Architecture}

### Synopsis 
The global architeture of the Rascal Tutor

### Description 

At the highest level, a course consists of concept files, which are translated to intermediate 
http://asciidoctor.org[AsciiDoc] files,
which in their turn, can be translated to html, pdf, epub and other output formats:

![](/assets/1f7112ec-00a6-450f-b48d-737b75c62972.png)

The compilation and runtime use of a single course are organized as follows:

![](/assets/4a5bbc3e-9ef1-416d-af17-576c354b37e1.png)

A course is a directory with concept files. Each concept file yields:

* An AsciiDoc file for further processing
* Onthology: the hierarchical structure of the concepts.
* Lucene-based Index-data extracted from the various sections of the concept.

External concepts refer to Rascal source code that contains embedded concepts in `@doc{ ... }`.
Similar information is extracted from them as for a standard concept.

Once all concepts have been processed their extracted information is combined:

* All AsciiDoc files are included in a single AsciiDoc file for the whole course. 
  This will be converted to the desired output format.
* The index-data are included in a single index.

The end results of processing a complete course are:

* A single html (or other) file for the whole course.
* A single index file for the whole course.

At runtime, the generated Hhtml can be viewed via a browser and search queries
can be answered using https://lucene.apache.org[Lucene] and the single index.

Another way to use a compiled course is directly from the REPL.

### Benefits 

* Index creation is modular: an index is created per course and these indices are combined at runtime.

### Pitfalls 

* Courses are compiled on a per-course basis. 
  Support for incremental courses compilation is not yet available.


## Markup {#Markup-Markup}

### Synopsis 
Markup directives for creating concept pages.





### Description 
The _MarkedText_ in each section of a concept is plain text.
Some characters or text strings are used to influence the markup of the text
and follow the conventions of http://asciidoctor.org.
We distinguish:

*  __Structure markup__ influences the structure of the text.
*  __Inline markup__ influences the markup for characters or words.
*  __Source code markup__ to define concepts in Rascal source code.





## Inline Markup {#Markup-InlineMarkup}

### Synopsis 

Markup directives used in input lines.





### Description 

For convenience we summarize the most commonn inline markup elements.
See http://asciidoctor.org/docs/asciidoc-syntax-quick-reference/ for more details.

* [Reference to concept](#Markup-InlineMarkup-ReferenceToConcept)
* [Variable](#Markup-InlineMarkup-Variable)
* [Code](#Markup-InlineMarkup-Code)
* [Italic](#Markup-InlineMarkup-Italic)
* [Image](#Markup-InlineMarkup-Image)
* [Callout](#Markup-InlineMarkup-Callout)
* [Bold](#Markup-InlineMarkup-Bold)
* [External u rL](#Markup-InlineMarkup-ExternalURL)





## Reference to Concept {#Markup-InlineMarkup-ReferenceToConcept}

### Synopsis 
Refer to a concept in this course or another course.

### Syntax 
* `_ DisplayName  (broken link)_`
* `_ ParentConceptName-ConceptName  (broken link)_`
* `\[LinkText]_Course (broken link)_`
* `\[LinkText]_Course:ParentConceptName-ConceptName (broken link)_`




### Description 

Recall that a concept is known under two names, its _concept name_ (the file name of the concept) and its _display name_ (the name as displayed in the text).

The first two forms create a link to a concept in the current course.

The remaining two forms create a link to a concept in another course.

The first creates a link to a complete course, the second to a specific concept in an external course.


### Examples 

The concept name of this concept is `ReferenceToConcept` while its display name is `Reference to Concept` (note the spaces).

We can create a reference to the `InlineMarkup` concept in the current course in the following ways:

* `\[Inline Markup](#Markup-InlineMarkup)` (using the display name) gives [Inline Markup](#Markup-InlineMarkup).
* `\[Inline markup](#Markup-InlineMarkup)` (using its parent concept name and concept name) gives [Inline markup](#Markup-InlineMarkup).
* `\[see inline markup]_broken:Tutor:Markup-InlineMarkup (ambiguous link)_` gives [see inline markup]_broken:Tutor:Markup-InlineMarkup (ambiguous link)_

Here is a reference to another course:

* `\[If statement]_broken:Rascal:Statements-If (ambiguous link)_` gives [If statement]_broken:Rascal:Statements-If (ambiguous link)_.


### Pitfalls 
Note the `/` before the course name in refernces to another course.


## Variable {#Markup-InlineMarkup-Variable}

### Synopsis 
Markup for a variable.

### Syntax 

* `\VarName`
* `\VarName\~Index~`
* `\VarName\^Index^`





### Description 
Variables in text and code are represented by [Italic](#Markup-InlineMarkup-Italic) markup. 
They may be followed by one or more subscripts (enclosed by `~` and `~`) or superscripts (enclosed by `^` and `^`)

### Examples 

* `\Var` gives _Var_.

* `\Var\<sub>1</sub>` gives _Var_<sub>1</sub>.

* `\Var\^1^` gives _Var_^1^.

* `\Var\^1^\<sub>2</sub>` gives _Var_^1^<sub>2</sub>.




## Code {#Markup-InlineMarkup-Code}

### Synopsis 
Create inline code fragments.

### Syntax 
```
\`MarkedText`
```




### Description 
Creates inline fragments of text that represent code.
Inside the _MarkedText_, other markup can be used.

### Examples 
` `if` ` --- that is ` followed by `if` followed by ` --- gives `if`.




## Italic {#Markup-InlineMarkup-Italic}

### Synopsis 
Create _italic_ text.

### Syntax 
```
_ _Text_ _
```





### Examples 
`\italic` gives: _italic_.




## Image {#Markup-InlineMarkup-Image}

### Synopsis 
Include an image.

### Syntax 

```
image::_File_[]
image::_File_[_AlternateName_, _Width_, _Height_, link=_URI_]
```




### Description 
Describes an image to be included:

* _File_ is the name of the image file.
* _AlternateName_ is the alternate name of the image.
* _Width_ is the required width (in pixels) of the image.
* _Height_ is the rewuired height of the image in pixels.
* When `link` is present, it turns the image in a link to the given _URI_.

For further styling of images, see http://asciidoctor.org/docs/user-manual/#images.

### Examples 
##  Example 1 
```
![](/assets/bed010e4-616f-4a3b-8e2a-8b6ac84ec336.jpg)
```
will produce:

![](/assets/bed010e4-616f-4a3b-8e2a-8b6ac84ec336.jpg)

##  Example 2 
```
![](/assets/bed010e4-616f-4a3b-8e2a-8b6ac84ec336.jpg)
```

![](/assets/bed010e4-616f-4a3b-8e2a-8b6ac84ec336.jpg)

produces a reduced image floating at the right.

##  Example 3 

And, finally,
```
![](/assets/bed010e4-616f-4a3b-8e2a-8b6ac84ec336.jpg)
```
produces a clickable image that links back to the source of the image.

![](/assets/bed010e4-616f-4a3b-8e2a-8b6ac84ec336.jpg)

Try it!




## Callout {#Markup-InlineMarkup-Callout}

### Synopsis 
Create a numeric callout for the digits 1--9.

### Syntax 

```
< _Digit_ >
```




### Description 

Callouts are used to attach numeric labels to a source code _Listing (broken link)_ for later discussion in the text.

### Examples 

``````
```
This code contains the callout <1> 
```
``````

Will produce:
```
This code contains the callout <1>
```

By including `<1>` in an enumeration or text, for instance, 

`<1> refers to the callout.` 

will give:

<1> refers to the callout.

### Benefits 
Callout are most usefull to place markers in code fragments for later reference in explanatory text.



## Bold {#Markup-InlineMarkup-Bold}

### Synopsis 
Create *bold* text.

### Syntax 
```
\*_Text_*
```





### Examples 
`\*bold*` gives *bold*.




## ExternalURL {#Markup-InlineMarkup-ExternalURL}

### Synopsis 
Refer to an external URL.

### Syntax 
* `URL`
* `URL[MarkedText]`





### Description 
Creates a link to an external url _URL_.
When _MarkedText_ is present, a clickable hyperlink is included with the text _Name_.
Otherwise _URL_ itself is included as clickable hyperlink.

### Examples 
```
http://www.rascal-mpl.org
```
gives http://www.rascal-mpl.org and
```
http://www.rascal-mpl.org[Rascal]
```
gives http://www.rascal-mpl.org[Rascal]. Try it!




## Source Code Markup {#Markup-SourceCodeMarkup}

### Synopsis 
Mark up in Rascal source code.



### Function 
       

### Details 
RemoteConceptMapping

### Description 

The mark up of concepts inside Rascal source code requires two steps:

* [Doc annotations](#Markup-SourceCodeMarkup-DocAnnotations)
* [Remote concept mapping](#Markup-SourceCodeMarkup-RemoteConceptMapping)





## Doc Annotations {#Markup-SourceCodeMarkup-DocAnnotations}

### Synopsis 
A doc annotation attaches an inline concept description to a Rascal declaration.

### Description  
All Rascal declarations can be preceeded by an annotation of the form `@doc{ ... }` where ... may be arbitrary text, 
provided that `{` and `}` characters are balanced and that unbalanced braces are escaped like `\{` or `\}`. 
This text is expanded to a full concept definition when the concept is processed. 


The Tutor supports and expands inline concept descriptions for the following declarations types.

## Module Declaration

The name of this module is extracted.
The header of the concept definition is automatically generated and consists of:

```
## _Module name_ {#Markup-SourceCodeMarkup-DocAnnotations}
### Usage 
_Import declaration needed to use this module_
```

## Function Declaration

The signatures of this function and of all directly following functions with the same name are collected. 
The signatures are placed in an itemized list (unless there is only one).
The header of the concept definition is automatically generated and consists of:

```
## _Function name_ {#Markup-SourceCodeMarkup-DocAnnotations}
### Function 
_Function signature_
### Usage 
_Import declaration needed to use this module_
```

## Data Declaration

The signatures of this data declaration and of all directly following data declarations without their own `@doc` annotation 
are collected.
The header of the concept definition is automatically generated and consists of:

```
## _Data declaration name_ {#Markup-SourceCodeMarkup-DocAnnotations}
### Type 
_Data declarations_
### Usage 
_Import declaration needed to use this module_
```

## Annotation Declaration

The signature of this annotation declaration is collected.
The header of the concept definition is automatically generated and consists of:

```
## _Annotation declaration name_ {#Markup-SourceCodeMarkup-DocAnnotations}
### Type 
_Annotation declarations_
### Usage 
_Import declaration needed to use this module_
```

### Examples 
We only give an example of documenting a simple function. Read the source code of Rascal library files for other ones. 

Consider the source code of the now function in the `DateTime` library.

```
  @doc{
### Synopsis 
  Get the current datetime.

### Examples 

```rascal-shell
rascal>  import DateTime;
ok
rascal>  now();
datetime: $2022-09-02T14:43:07.892+00:00$
```
  }
  @javaClass{org.rascalmpl.library.DateTime}
  public java datetime now();
```
  
  
This will be expanded to

```
## now {#Markup-SourceCodeMarkup-DocAnnotations}
### Function 
  `datetime now()`
### Usage 
  `import DateTime;`

### Synopsis 
  Get the current datetime.

### Examples 

```rascal-shell
rascal>  import DateTime;
ok
rascal>  now();
datetime: $2022-09-02T14:43:07.949+00:00$
```
```

and the final result is link:/Libraries#Prelude-DateTime#now[now].

### Benefits 
A (small) part of documentation writing is automated.
The information about the name of a function, data or annotation declaration, or its signature is always consistent.

### Pitfalls  
* This approach requires that functions with the same name are grouped together in the source file.
* We do not (yet) provide direct editing of `@doc{ ... }` in Rascal source files. We should!

## Remote Concept Mapping {#Markup-SourceCodeMarkup-RemoteConceptMapping}

### Synopsis 
Include the concepts in a Rascal source module in a course.



### Function 
       


### Description 

Each Rascal source file defines a module `M` that may declare concepts `M/c__<sub>1</sub>`, `M/c__<sub>2</sub>`, ....
as indicated by embedded `@doc` annotations.
How are these concepts included in a Tutor course?

The answer is a remote concept file.

Where an ordinary concept `C` is defined by a subdirectory `C` and a concept file `C/C.concept` 
a remote concept is defined by `C/C.remote` that contains the location of the source file, say `CLoc`.

`Cloc` will be parsed, all its concepts will be extracted and all these
concepts become subconcepts of `C`. 

Moving the documentation for a library file is as simple as 
moving `C` to another position in the concept hierarchy.

### Examples 
The `DateTime` library module is defined in the [Libraries](#Libraries-Libraries) course by
the subdirectory `Libraries/Prelude/DateTime` and the file `DateTime/DateTime.remote`.
The latter contains a single line with the location of the DateTime module:

```rascal
|std:///DateTime.rsc|
```


This establishes, for instance, that the function `now` that is declared in the `DateTime.rsc` library file
will become the concept `Libraries/Prelude/DateTime/now`.


### Pitfalls 

*  Be carefull to avoid spaces, since the value reader does not like them.


## QuestionMarkup {#Markup-QuestionMarkup}

### Synopsis 
Mark up for interactive questions.





### Description 

WARNING: The specification of questions is being redesigned; The information provided here is outdated.

The following types of questions are supported:

*  _Text_: a text question with a free format answer.
*  _Choice_: a multiple choice question.
*  _Type_: question about the _type_ of a Rascal expression.
*  _Value_: question about the _value_ of a Rascal expression.


[Text](#Markup-QuestionMarkup-Text) gives the question text and lists all possible good answers.

[Choice](#Markup-QuestionMarkup-Choice) is a straightforward listing of good and bad answers.

[Type](#Markup-QuestionMarkup-Type) and _broken:Value (ambiguous link)_ questions are based on a template that consists of an optional _listing_ and an _equality_:

![](/assets/2814c418-8e08-49c6-ad8e-ce1e4135e599.png)


There should be exactly one _hole_ (indicated by `<?>`) in this template that is to be filled in by the student; it may occur in the listing
or in one of the sides of the equality. The general structure is therefore: _fill in the hole such that the equality holds_.
Given that the listing is optional, this template represents 5 different question styles.

[Type](#Markup-QuestionMarkup-Type) and _broken:Value (ambiguous link)_ questions use [Type descriptor](#Markup-QuestionMarkup-TypeDescriptor)s to describe desired values and share certain common steps (_QSteps_):

* `prep: RascalCommand` describes preparatory steps needed to execute the question. Typically, required
  imports can be listed here.
* `make: Var = TypeDescriptor`: makes a new value generated according to _TypeDescriptor_ and assigns it to a new variable _Var_.
  _Var_ can be used in later steps in the same question.
* `expr: Var = Expr`: introduces a new variable _Var_ and assigns to it the result of evaluating _Expr_. 
   _Expr_ may contain references to previously introduced variables using `<`Var`>`.
* `type: TypeDescriptor`
* `hint: Text`: a hint to be given to the student in response to a wrong answer. _Text_ may contain references to previously introduced variables.
* `test: Expr<sub>1</sub> == Expr<sub>2</sub>`: the equality that should hold. The expressions may contain references to variables. One side may contain a hole (`<?>`).
* `list: Text`: a listing that runs until the next question or the end of the concept. It may contain a hole.

### Examples 

*  `prep: import List;` imports the List module before executing the following steps.
*  `make: A = set[arb[int,str]]` introduces `A` and assigns it a value of the indicated type.
*  `make: B = same[A]` introduces `B` and assigns it a value of the same type as `A`.
*  `expr: C = <A> + <B>`: inserts the values of `A` and `B`, performs the addition, and assigns the result to `C`.
*  `type: set[int]`: the required type is `set[int]`.
*  `hint: One or more integers separated by comma's`.
*  `test: <A> + <?> == <C>`: the student has to replace `<?>` by an answwer that makes the equality true.




## Value {#Markup-QuestionMarkup-Value}

### Synopsis 
Question about the value of a Rascal expression or program.

### Syntax 

*  `QValue OptName: TypeDescriptor`
*  `QValue OptName: QSteps Test Listing`




### Description 
A value question presents a Rascal expression and poses a question about its value.

_OptName_ is an optional name of the question (enclosed between `[` and `]`).
If _OptName_ is missing, the question gets a unique number as name.

The desired type of the expression is given by a [Type descriptor](#Markup-QuestionMarkup-TypeDescriptor).

The first form presents the value generated for the _TypeDescriptor_ and asks about its value.

The second form allows more preparatory steps and also allows adding a listing to the question.
The following steps are defined:

*  `prep: Cmd`: execute _Cmd_ as preparatory step. Mostly used to import necessary libraries.
*  `make: Var = TypeDescriptor`: create a new variable and use _TypeDescriptor_ to generate its value.
*  `expr: Var = Exp`: evaluate the Rascal expression _Exp_ and assign its value to the new variable _Var_.
*  `list: Lines`: lines that will be displayed as a listing. The listing may contain a placeholder in the form of `<?>` and
  ends where a new step begins.
*  `test: Exp<sub>1</sub> == Exp<sub>2</sub>`: the equality is evaluated as Rascal expression. The outcome determines the success or failure to answer this question.
*  `hint: Text`: a hint that will be shown when the user enters a wrong answer.

The following restrictions apply:

*  Each step starts at the beginning of a new line.
*  Every _Exp_ or _Cmd_ or listing may contain one or more variable references of the form `<` Var `>`.
*  Each variable reference `<` Var `>` is first replaced by the value of _Var_.
   _Var_ should have received a value in a preceeding `make` or `expr` step.
*  The listing, and the expressions in the test may contain at most one placeholder `<?>`.

### Examples 
See the effect of the following value questions in the Questions section below.

##  Question 1 

The following question can be paraphrased as: _I give you a union of two sets of integers, what is its value?_
```rascal
QValue: <A:set[int]> + <B:same[A]>
```

##  Question 2 

The following question can be paraphrased as: _What is the size of a given list of integers?_
```rascal
QValue:
prep: import List;
test: size(<A:list[int]>) == <?>
```
Note that the `List` module is imported as a preparatory step.

##  Question 3 

The following question can be paraphrased as: 
_I give you a union of integers or strings and an unknown set and the result of the union; what is the value of the unknown set?_
```rascal
QValue:
make: A = set[arb[int,str]]
make: B = same[A]
expr: C = <A> + <B>
hint: <B>
test: <A> + <?> == <C>
```

Observe that we generate values for `A` and `B` and compute the value of `C`.
The value of `B` is the answer we are looking for, and we replace it by `<?>` in the posed test.
When the student gives a wrong answer, we show the value of `B` as hint.

###  Question 4

The following question can be paraphrased as: 
_Fill in the hole in the definition of funcion find to ensure that it returns all strings that contain "o"._
```rascal
QValue:
desc: Return the strings that contain "o".
list:
text = ["andra", "moi", "ennepe", "Mousa", "polutropon"];
public list[str] find(list[str] text){
  return
    for(s <- text)
      if(/o/ := s)
        <?>;
}
test: find(text) == ["moi", "Mousa", "polutropon"];
```




## Choice {#Markup-QuestionMarkup-Choice}

### Synopsis 
Multiple-choice question.

### Syntax 
```
QChoice _OptName_: _MarkedText_ 
_GoodOrBad_<sub>1</sub>: _Choice_<sub>1</sub>
_GoodOrBad_<sub>2</sub>: _Choice_<sub>2</sub>
...
```




### Description 
Asks a multiple-choice questions described by _MarkedText_.
_OptName_ is an optional name of the question (enclosed between `[` and `]`).
If _OptName_ is missing, the question gets a unique number as name.

Each possible _Choice_ is preceded by a good (`g`) or bad (`b`) marker.
When generating a question 3 choices (including one good answer) are presented in random order.

Providing more good and bad answers will therefore create more variation in the generated questions.

### Examples 
```rascal
QChoice[Faster]: Which means of transportation is faster:
b: Apache Helicopter
g: High-speed train
b: Ferrari F430
b: Hovercraft
```
will produce the question `Faster` in the questions section below.

And, by the way, the http://en.wikipedia.org/wiki/High-speed_rail[High-speed train] wins with over 570 km/hour compared to
http://en.wikipedia.org/wiki/Ferrari_F430[Ferrari] (315 km/hour), http://en.wikipedia.org/wiki/Boeing_AH-64_Apache[Apache] (293 km/hour)
and http://en.wikipedia.org/wiki/Hovercraft[Hovercraft] (137 km/hour).




## Type {#Markup-QuestionMarkup-Type}

### Synopsis 
A question about a Rascal type.

### Syntax 

*  `QType OptName : TypeDescriptor`
*  `QType OptName : QSteps Test Listing`




### Description 
A type question presents a Rascal expressions and poses a question about its type.

_OptName_ is an optional name of the question (enclosed between `[` and `]`).
If _OptName_ is missing, the question gets a unique number as name.

The desired type is given by a [Type descriptor](#Markup-QuestionMarkup-TypeDescriptor).

The first form presents the value generated for the _TypeDescriptor_ and asks about its type.

The second form allows more preparatory steps and also allows adding a listing to the question.

### Examples 
See the effect of the following type questions in the Questions section below.

##  Question 1 

The following question can be paraphrased as: _I give you an arbitrary set of integers, what is its type?_
```rascal
QType: <A:set[int]>
```

##  Question 2 


The following question can be paraphrased as: _I give you an addition of a set of integers, strings or reals and another set of the same type; what is the type of the result?_
```rascal
QType: <A:set[arb[int,str,real]]> + <B:same[A]>
```




## Text {#Markup-QuestionMarkup-Text}

### Synopsis 
A text question with a free-format answer.

### Syntax 
```
QText _OptName_: _Text_
a: _Answer_<sub>1</sub>
a: _Answer_<sub>2</sub>
...
```




### Description 
Presents a text questions consisting of _Text_.
_OptName_ is an optional name of the question (enclosed between `[` and `]`).
If _OptName_ is missing, the question gets a unique number as name.

The user can give a free format answer, and that is accepted if it contains one of the given answers _answer_<sub>1</sub>, _Answer_<sub>2</sub> as substring.

### Examples 
The markup
```rascal
QText[Taller]: Which is taller, the Eiffel Tower or the Empire State Building?
a: Empire
```
Will generate question `Tall` in the questions section below.
The answer is obvious: the http://en.wikipedia.org/wiki/Empire_State_Building[Empire State Building] is 443.2 meters tall while the http://en.wikipedia.org/wiki/Eiffel_Tower[Eifel Tower] is 324 meters tall.
Any answer that contains `Empire` will be accepted.




## TypeDescriptor {#Markup-QuestionMarkup-TypeDescriptor}

### Synopsis 
Description of a Rascal type used in type and value questions.

### Syntax 

A _TypeDescriptor_ is one of

*  `bool`
*  `int`
*  `int[Max]`
*  `int[Min,Max]`
*  `real`
*  `real[Max]`
*  `real[Min,Max]`
*  `num`
*  `num[Max]`
*  `num[Min,Max]`
*  `str`
*  `loc`
*  `datetime`
*  `list[TypeDescriptor]`
*  `set[TypeDescriptor]`
*  `map[TypeDescriptor,TypeDescriptor]`
*  `tuple[TypeDescriptor<sub>1</sub>, TypeDescriptor<sub>2</sub>, ...]`
*  `void`
*  `value`
*  `arb`
*  `arb[Int]`
*  `arb[Int, TypeDescriptor<sub>1</sub>, TypeDescriptor<sub>2</sub>]`
*  `arb[TypeDescriptor<sub>1</sub>, TypeDescriptor<sub>2</sub>]`
*  `same[TypeName]`




### Description 
A TypeDescriptor is used to describe Rascal types and values in questions and are used to automatically generate
values of the described type. TypeDescriptors largely follow the types as available in Rascal, with the following
extensions that are helpfull when generating values:

*  `int`, `real` and `num` may specify a minimal and maximal value for the values to be generated.
*  `arb` describes an arbitrary type. The choice can be restricted by:
   **  given an integer that defines the maximal depth of the type.
   **  given an explicit list of types to choose from.
*  `same[Name]` refers back to a type that was used earlier on in the same question.

### Examples 

| TypeDescriptor      | Generated value |
| --- | --- |
| `int`               | Arbitrary integer |
| `int[-5,10]`        | An integer between -5 and 10 |
| `arb[int,bool,str]` | An arbitrary integer, boolean or string |
| `list[int]`         | A list of integers |
| `set[int[0,10]]`    | A set of integers between 0 and 10  |



### Pitfalls 

*  There is currently an arbitrary built-in limit that restricts generated lists, sets,
   maps and relations to at most 5 elements.
*  There is no support for labeled tuples.


## Structure Markup {#Markup-StructureMarkup}

### Synopsis 

Markup for structured text entities.





### Description 

The follwing structured markup is supported:
loctoc::[]





## NewParagraph {#Markup-StructureMarkup-NewParagraph}

### Synopsis 
Introduce a new paragraph.





### Description 
A new paragraph is created by a single empty line.

### Examples 
The input:
```
line1
line2

line3
line4
```

will produce:

line1
line2

line3
line4




## Numbered Lists {#Markup-StructureMarkup-NumberedLists}

### Synopsis 
A (possibly nested) list of numbered points.

### Syntax 

* `Number MarkedText`
* `. MarkedText`
* `.. MarkedText`
* `\... MarkedText`
* ...





### Description 
Numbered Lists create, possibly nested, lists of numbered points.
They either start with a period (`.`) or a number. The number of periods indicates the nesting level.

A list item ends with:

*  the start of a new list item.
*  an empty line.

[Bullet Lists](#Markup-StructureMarkup-BulletLists) and Numbered Lists can be mixed.
See http://asciidoctor.org/docs/user-manual/#ordered-lists for the precise rules.

### Examples 
The input

```
. First item.
. Second item.
```

will produce:

. First item.
. Second item.

The input

```
. First item.
  ..  First subitem.
  ..  Second subitem.
. Second item
```

will produce:

. First item.
  ..  First subitem.
  ..  Second subitem.
. Second item


### Pitfalls 
An empty line is required before and after a NumberedList.


## Table {#Markup-StructureMarkup-Table}

### Synopsis 
Mark up for a table.

### Syntax 
```
| _Header_<sub>1</sub> | _Header_<sub>2</sub> | ... |
``` | 
| _Entry_<sub>11</sub>  | _Entry_<sub>12</sub>  | ... |
| _Entry_<sub>21</sub>  | _Entry_<sub>22</sub>  | ... |

----




### Description 

The simplest table starts and ends with `|===`, each row is separetd by an empty line and each column starts with `|`.
There are, hwoever, other formats and options to specify the formatting of cells and columns.
See http://asciidoctor.org/docs/user-manual/#tables for details.

### Examples 

##  Example 1 

```rascal
| A  | B  | C |
| --- | --- | --- |
| 11 | 12 | 13 |
| 21 | 22 | 23 |

```

gives:

| A  | B  | C |
| --- | --- | --- |
| 11 | 12 | 13 |
| 21 | 22 | 23 |


##  Example 2 

A column specification may precede the table and specifies the number of columns with default alignment (left) and with
specified alignment: left (`<`), centered (`^`) or right (`>`).

```rascal
[cols="1*,^,1*"]
| A  | B  | C |
| --- | --- | --- |
| 11 | 12 | 13 |
| 21 | 22 | 23 |

```

gives (with column B centered):

[cols="1*,^,1*"]
| A  | B  | C |
| --- | --- | --- |
| 11 | 12 | 13 |
| 21 | 22 | 23 |


##  Example 3 

```rascal
[cols="2*,>"]
| A  | B  | C |
| --- | --- | --- |
| 11 | 12 | 13 |
| 21 | 22 | 23 |

```

gives (with column C right-aligned):

[cols="2*,>"]
| A  | B  | C |
| --- | --- | --- |
| 11 | 12 | 13 |
| 21 | 22 | 23 |


##  Example 4 

```rascal
| Operator    | Description |
| --- | --- |
| `A \| B` | Or operator |

```

gives (note the escaped `|` character in one table entry):

| Operator    | Description |
| --- | --- |
| `A \| B` | Or operator |


### Benefits 
Table formatting are versatile and include, sizing, subtables, column spans, and more, see  http://asciidoctor.org/docs/user-manual/#tables.



## Admonition {#Markup-StructureMarkup-Admonition}

### Synopsis 
Mark up for admonitions.

### Syntax 
* `NOTE: MarkedText`
* `TIP: MarkedText`
* `IMPORTANT: MarkedText`
* `CAUTION: MarkedText`
* `WARNING: MarkedText`




### Description 
An admonition is remark that should draw the reader's attention.

### Examples 
The input

`NOTE: This is a note.`

gives

NOTE: This is a note.

The input:

`WARNING: Use warnings sparingly.`

will give:

WARNING: Use warnings sparingly.


### Pitfalls 
An admonition should start at the begin of a line and the `:` should be followed by a single space.


## Bullet Lists {#Markup-StructureMarkup-BulletLists}

### Synopsis 
A (possible nested) list of bullet points.

### Syntax 
*  `* MarkedText`
*  `** MarkedText`
*  `\*** MarkedText`
*  ...




### Description 
Bullet lists create, possibly nested, lists of points.
The number of `*` characters determines the nesting level of a (sub)list.

A list item ends with:

*  the start of a new list item.
*  an empty line.

Bullet Lists and [Numbered Lists](#Markup-StructureMarkup-NumberedLists) can be mixed.
See http://asciidoctor.org/docs/user-manual/#unordered-lists for the precise rules.

### Examples 
The input

```
* First item.
* Second item.
```

will produce:

*  First item.
*  Second item.


The input

```
* First item.
  ** First subitem.
  ** Second subitem.
* Second item.
```

will produce:

*  First item.
   **  First subitem.
   **  Second subitem.
*  Second item.


### Pitfalls 
An empty line is required before and after a BulletList.


## Table of Contents {#Markup-StructureMarkup-TableOfContents}

### Synopsis 
Generate a local table of contents of current concept.

### Syntax 

`loctoc::[Depth]`




### Description 

Generate a local table of contents for all subconcepts of the current concept to a depth of _Depth_.
When _OptDepth_ is missing, 1 will be used as default depth.

This is useful for summary pages.

### Examples 

A table of contents of 1 level deep is generated by `(_TOC (broken link)_)`.
The local table of contents for this course is generated by `loctoc[3]`, see [Tutor](#Tutor).




## NamedParagraph {#Markup-StructureMarkup-NamedParagraph}

### Synopsis 
Mark up for a named paragraph.

### Syntax 

*  `## ParagraphName`
*  `\### ParagraphName`
*  ...




### Description 
A NamedParagraph produces a named paragraph of a level that is determined by the number of `#` characters preceding the _ParagraphName_.

### Examples 
The input:

`## Paragraph`

will give

## Paragraph


### Pitfalls 
* NamedParagraphs have at least two hash signs (`##`). A single hash is reserved for the Concept level.
* A NamedParagraph should start at the start of a line.


## Authoring {#Authoring-Authoring}

### Synopsis 
Creating and writing a course for the Rascal Tutor.





### Description 
The life cycle of a course consists of the following steps:

* A new course, say `MyCourse`, is created. This is achieved by:
  ** Creating a subdirectory named `MyCourse` in the `courses` directory of the current Rascal project.
  ** Creating a file `MyCourse/MyCourse.concept`. This is the root concept of the new course.
* The contents of the course are created by populating the course with subconcepts of the root concept.
* A subconcept, say `CoolIdea` is created by:
  ** Creating a subdirectory `CoolIdea` of its parent concept.
  ** Creating a file `CoolIdea/CoolIdea.concept` that describes the concept.
  
* Renaming/moving/deleting concepts is done at the directory/file level.

Concepts are represented as directories for the following reasons:

* To represent subconcepts as subdirectories.
* To contain all figures and other files that are included in the concept. In this way:
  ** A complete concept can be easily moved or renamed as a single unit.
  ** Name clashes between included files per concept are avoided.


### Benefits 
You can use your favourite editor and standard system command to author a course.

### Pitfalls 
There is no editing support or incremental course compilation available (yet).

## Concept {#Concept-Concept}

### Synopsis 
A _concept_ is the basic building block of a course.

### Syntax 

```
## _ConceptName_ {#Concept-Concept}
```

```
### Synopsis 
_MarkedText_
```

```
### Syntax 
_MarkedText_
```

```
### Types 
_MarkedText_
```

```
### Function 
_MarkedText_
```

```
### Details 
_ConceptNames_
```

```
### Description 
_MarkedText_
```

```
### Examples 
_MarkedText_
```

```
### Benefits 
_MarkedText_
```


```
### Pitfalls 
_MarkedText_
```

The first two sections (Name and Synopsis) are mandatory, the others are optional.
It is recommended to give examples.



### Details 
Name Synopsis Syntax Types Function Details Description Examples Benefits Pitfalls Questions

### Description 
A concept describes a separate entity (idea, artefact, function, rule) that is relevant in the scope of the course in which it appears.
It consists of 11 named sections that are described separately. 
Each section starts with a keyword that should appear at the begin of a line.
The first two sections (Name and Synopsis) are mandatory,

Here is a brief summary of the sections of a concept:
* _broken:Tutor:Concept-Types (ambiguous link)_
* _broken:Tutor:Concept-Details (ambiguous link)_
* _broken:Tutor:Concept-Function (ambiguous link)_
* _broken:Tutor:Concept-Pitfalls (ambiguous link)_
* _broken:Tutor:Concept-Description (ambiguous link)_
* _broken:Tutor:Concept-Examples (ambiguous link)_
* _broken:Tutor:Concept-Benefits (ambiguous link)_
* _broken:Tutor:Concept-Synopsis (ambiguous link)_
* _broken:Tutor:Concept-Name (ambiguous link)_
* _broken:Tutor:Concept-Syntax (ambiguous link)_




### Pitfalls 

* Note that all section names start with a period, e.g., `.Examples`.
* No space is allowed before the section name.


## Types {#Concept-Types}

### Synopsis 
Part of the synopsis that describes any types or typing rules introduced by this concept.

### Syntax 
```
### Types 
_MarkedText_
```




### Description 
The `Types` section describes any types that are involved in the concept that is described.
The description can be just text, but in many cases a table is useful to describe types.


### Examples 
Here is a type description of an if-then-else statement:

```
### Types 
| `Exp` | `if ( Exp ) Statement;`  |
``` | 
| `bool`  |  `void`                      |



| `Exp` | `Statement<sub>1</sub>` | `Statement<sub>2</sub>` | `if ( Exp ) Statement<sub>1</sub> else Statement<sub>2</sub>;`  |
| --- | --- | --- | --- |
| `bool`  |  T<sub>1</sub>        | T<sub>2</sub>         | `lub(T<sub>1</sub>, T<sub>2</sub>)`                               |

----

The result will be displayed as:

### Types 
| `Exp` | `if ( Exp ) Statement;`  |
| --- | --- |
| `bool`  |  `void`                      |



| `Exp` | `Statement<sub>1</sub>` | `Statement<sub>2</sub>` | `if ( Exp ) Statement<sub>1</sub> else Statement<sub>2</sub>;`  |
| --- | --- | --- | --- |
| `bool`  |  T<sub>1</sub>        | T<sub>2</sub>         | `lub(T<sub>1</sub>, T<sub>2</sub>)`                               |





## Details {#Concept-Details}

### Synopsis 
Explcitly order the subconcepts of the current concept.

### Syntax 
```
### Details 
_ConceptNames_
```




### Description 
To fully describe a concept, subconcepts (or details) are needed.
When the `Details` section is empty, subconcepts will be listed
alphabetically in the details section of the generated HTML file.

This alphabetical order can be influenced by explicitly stating concepts in the details sections.
The effect is that the concepts listed there will be shown first, followed by the unmentioned subconcepts
in alphabetical order.

### Examples 
In [Concept](#Concept-Concept) we want to order the details in the order as they appear in the concept description.
Its `Details` section is therefore:

```
### Details 
Name Details Syntax Types Function Synopsis Description Examples Benefits Pitfalls Questions
```




## Function {#Concept-Function}

### Synopsis 
Part of the synopsis that describes function signatures introduced by this concept.

### Syntax 
```
### Function 
_MarkedText_
```





### Examples 
Here is an example for the `readFile` function:


### Syntax 
```
### Function 
str readFile(loc file) throws UnsupportedScheme(loc file), PathNotFound(loc file), IOError(str msg)
```




## Pitfalls {#Concept-Pitfalls}

### Synopsis 
Comprehensive list of known shortcomings or usage problems of the concept.

### Syntax 
```
### Pitfalls 
_MarkedText_
```









## Description {#Concept-Description}

### Synopsis 
Gives a concise explanation of a concept.

### Syntax 
```
### Description 
_MarkedText_
```




### Description 
The `Description` section gives a concise explanation of a concept.

### Examples 
The `Description` section of the concept `Description` (= the previous section) reads as follows:

```
### Description 
The `Description` section gives a concise explanation of a concept.
```


### Pitfalls 

*  Avoid giving examples in the `Description` section but reserve these for the `Examples` section.
*  Do not give explicit lists of subconcepts (details) since they are already included automatically in the `Details` section in the generated page.


## Examples {#Concept-Examples}

### Synopsis 
Examples to illustrate the concept.

### Syntax 
```
### Examples 
_MarkedText_
```




### Description 
Gives a number of simple but complete examples to illustrate the concepts and its variations.
Running examples (using _Screen (broken link)_) are preferred.





## Benefits {#Concept-Benefits}

### Synopsis 
Briefly lists known advantages of the concept.

### Syntax 
```
### Benefits 
_MarkedText_
```









## Synopsis {#Concept-Synopsis}

### Synopsis 
One-line summary of the concept that is usable as a tool tip or table of contents entry

### Syntax 
```
### Synopsis 
_MarkedText_
```




### Description 

The full summary of a concept consists of the Synopsis and the optional elements
_broken:Syntax (ambiguous link)_, [Types](#Concept-Types) and _broken:Function (ambiguous link)_.

Synopsis is *mandatory* (this is not yet enforced).





## Name {#Concept-Name}

### Synopsis 
The display (presentation) name of a concept.

### Syntax 
```
## _ConceptName_ {#Concept-Name}
```




### Description 
A concept has actually three names:

* Its file name, i.e., the name of the `.concept` file in which the concept is described.
* Its _full_ name, the path name from the root concept to the current concept file.
* Its displayed name, its name  as its appears as section heading and in the table of contents.

Name defines the presentation name of a concept and may be an arbitrary text. Concept names are used to
refer to other concepts: when unambiguous its file name or display name can be used to refer to another concept, 
otherwise a sufficient part of its full name has to be given to make it unambiguous.

Name is *mandatory*.

### Examples 
The first line of this concept is:

```
### Name 
Name
```




## Syntax {#Concept-Syntax}

### Synopsis 
Part of the synopsis that summarizes syntax introduced by this concept.

### Syntax 
```
### Syntax 
_MarkedText_
```




### Description 
The syntax section is intended to describe syntactic aspects of language constructs.
The contents of this section are arbitrary text.


### Examples 
The syntax section for an if-then statement can be written as:

```
### Syntax 
`if ( Exp ) Statement;`
```




## Maintenance {#Maintenance-Maintenance}

### Synopsis 
How to maintain a course.



### Function 
       


### Description 

The following topics are discussed:

* _broken:Tutor:Maintenance-Renaming (ambiguous link)_
* _broken:Tutor:Maintenance-Adding (ambiguous link)_
* _broken:Tutor:Maintenance-Removing (ambiguous link)_





## Renaming {#Maintenance-Renaming}

### Synopsis 
How to rename a concept.



### Function 
       


### Description 
To rename a concept _C_ to _D_:

*  Rename _C_ to _D_ using the commands of the version control system.
*  Rename `D/C.concept` to `D/D.concept` using the version control system.
*  Open `D/D.concept` in a text editor and change the display name on the first line `# Old Display Name` to `# New Display Name`.
*  Recompile the course.





## Adding {#Maintenance-Adding}

### Synopsis 
Add a concept to a course



### Function 
       


### Description 

There are basically two scenarios for adding a new concept, depending on where its contents come from.
If the concept is part of the course (i.e. it is now a remote concept, see below):

* Select a concept that is suitable as parent for the new concept.
* Create a subdirectory, say `SubConcept` for the new subconcept.
* Create the file `SubConcept/SubConcept.concept` using your favourite editor.
* Add the name and other information about the new concept.
* Save the file.


If the concept involves remote content (i.e., the concepts are described in rascallibrary files),
then a [Remote Concept Mapping](#Markup-SourceCodeMarkup-RemoteConceptMapping) has to be added as explained in [Source Code Markup](#Markup-SourceCodeMarkup).





## Removing {#Maintenance-Removing}

### Synopsis 
Remove a concept from a course.



### Function 
       


### Description 
To remove a concept _C_:

*  Remove subdirectory _C_ (and its subdirectories) using standard commands.
*  Recompile the course.





