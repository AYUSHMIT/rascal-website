name: PR builder (sanity check, no deploy)

on:
  pull_request:
    branches:
      - website-v2

jobs:
  website-pr:
    name: Sanity check the Rascal website
    runs-on: buildjet-4vcpu-ubuntu-2204
    steps:
      # Checkout only the workflow folder for this commit (else it uses main branch)
      - name: Clone
        uses: actions/checkout@v4
        with:
          sparse-checkout: '.github'

      # Do the base actions
      - uses: ./.github/base-jobs.yml

      # Download prepared sources from base
      - name: Download sources
        uses: actions/download-artifact@v3
        with:
          name: sources

      # Do a dummy build to see if there are errors
      - name: Install dependencies
        run: yarn install --frozen-lockfile
      - name: Build website
        run: yarn build
